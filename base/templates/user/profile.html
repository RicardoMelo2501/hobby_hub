{%extends 'base/header.html'%}

{%block 'titulo'%}
Perfil
{%endblock%}

{% block 'conteudo' %}

        <!-- <div class="col-12 row d-flex justify-content-between">
            <div>
                <h2 class="mb-4" >Usuário Cadastrados</h2>
            </div>
            <div>
                <a class=" btn btn-success btn-sm" href="{% url 'home:register' %}">Cadastrar Usuário<i class="fas fa-plus ml-2"></i></a>
            </div>
        </div> -->
    
        {% comment %} <table class="table table-dark table-hover">
            <thead>
                <tr>
                <th scope="col" class="text-center">Id</th>
                <th scope="col" class="text-center">Usuário</th>
                <th scope="col" class="text-center">Nome</th>
                <th scope="col" class="text-center">Email</th>
                </tr>
            </thead>
            <tbody>                            
                {% for usuario in usuarios %}                
                    <tr>
                        <th scope="row" class="text-center">{{usuario.id}}</th>
                        <td class="text-center">{{usuario.username}}</td>
                        <td class="text-center">{{usuario.first_name}}</td>
                        <td class="text-center">{{usuario.email}}</td>
                        <td class="text-center">
                            <a href="{% url 'home:edit' pk=usuario.pk %}" type="button" class="btn btn-warning btn-sm">
                                <i class="fas fa-pencil-alt"></i>
                            </a>
                            <a type="button" class="btn btn-danger btn-sm">
                                <i class="fas fa-trash-alt"></i>
                            </a>
                        </td>
                    </tr>
                {% endfor %}              
            </tbody>
        </table> {% endcomment %}

        <div class="main_profile d-flex flex-column align-items-center">
            <div>
                <h1>Perfil do usuário</h1>
            </div>

            <div class="d-flex flex-column align-items-center mt-3">
                <div class="d-flex mt-1 mb-3 align-items-center justify-content-center" id="imagemPreviewProfile">
                    <!-- Aqui a imagem carregada será exibida -->
                </div>

                <form>
                    <div class="form-group">
                      <label for="imagem">
                      <div class="d-flex align-items-center justify-content-center">
                        <input class="input_img" type="file" id="imagemInput" accept="image/*" onchange="carregarImagem(event)">
                        <label class="change_img_profile" for="imagemInput">Alterar foto <i class="far fa-edit pl-2" style="color: #ffffff;"></i></label>
                      </div>
                    </div>
                </form>
    
            </div>

            <div class="text-center">  
                <p class="text-white">Nome: {{ usuario.first_name }} </p>
                <p class="text-white">E-mail: {{ usuario.email }}</p>
                <p class="text-white">Nome de usuário: {{ usuario.username }}</p>                
            </div>

            <div class="btn_profile d-flex flex-column ">
                <button type="submit" class="btn btn-secondary">Alterar senha</button>
                <button type="submit" class="btn btn-danger mt-2">Excluir conta</button>
            </div>
        </div>

        <script>
            function carregarImagem(event) {
              const input = event.target;
              const preview = document.getElementById('imagemPreviewProfile');
        
              if (input.files && input.files[0]) {
                const reader = new FileReader();
        
                reader.onload = function(e) {
                  preview.innerHTML = `<img src="${e.target.result}" class="img-fluid mt-2" alt="Imagem Carregada">`;
                }
        
                reader.readAsDataURL(input.files[0]);
              }
            }
          </script>

{% endblock 'conteudo' %}